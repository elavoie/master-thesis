\chapter{Performance results}
\label{apdx:PerformanceResults}

\def\shrink#1{\hspace*{-1ex}#1\hspace*{-1ex}}

\begin{table*}[htbp]
\centering
\resizebox{\textwidth}{!}{
\begin{tabular}{|l|rrr|rrr|rrr|rrr|}
\hline
          & \multicolumn{3}{c|}{Safari JIT}
          & \multicolumn{3}{c|}{Chrome JIT}
          & \multicolumn{3}{c|}{Firefox JIT}
          & \multicolumn{3}{c|}{Firefox interpreter}                         \\

          & \multicolumn{1}{c}{\shrink{\small without}} & \multicolumn{1}{c}{\shrink{\small with}}   &       
          & \multicolumn{1}{c}{\shrink{\small without}} & \multicolumn{1}{c}{\shrink{\small with}}   &       
          & \multicolumn{1}{c}{\shrink{\small without}} & \multicolumn{1}{c}{\shrink{\small with}}   &       
          & \multicolumn{1}{c}{\shrink{\small without}} & \multicolumn{1}{c}{\shrink{\small with}}   &       \\

Benchmark & \multicolumn{1}{c}{\shrink{\small Photon}}  & \multicolumn{1}{c}{\shrink{\small Photon}} & {\small Ratio}
          & \multicolumn{1}{c}{\shrink{\small Photon}}  & \multicolumn{1}{c}{\shrink{\small Photon}} & {\small Ratio}
          & \multicolumn{1}{c}{\shrink{\small Photon}}  & \multicolumn{1}{c}{\shrink{\small Photon}} & {\small Ratio}
          & \multicolumn{1}{c}{\shrink{\small Photon}}  & \multicolumn{1}{c}{\shrink{\small Photon}} & {\small Ratio} \\
\hline
Richards     &   11033 &     137 &\factor{ 80.77}  &   16024 &     106 &\factor{150.86}  &   12267 &      67 &\factor{182.11}  &     195 &      14 &\factor{ 13.71}\\
RayTrace     &    9866 &     214 &\factor{ 46.06}  &   20889 &     144 &\factor{144.66}  &    9725 &     100 &\factor{ 97.34}  &     549 &      39 &\factor{ 14.02}\\
DeltaBlue    &    7153 &     179 &\factor{ 40.05}  &   20389 &     150 &\factor{136.11}  &   12884 &      67 &\factor{191.15}  &     224 &      21 &\factor{ 10.88}\\
EarleyBoyer  &   10632 &     657 &\factor{ 16.18}  &   36279 &     664 &\factor{ 54.64}  &   16637 &     243 &\factor{ 68.58}  &     679 &      71 &\factor{  9.53}\\
Crypto       &   19866 &    1233 &\factor{ 16.11}  &   21073 &    1175 &\factor{ 17.93}  &   14045 &     230 &\factor{ 61.01}  &     168 &      40 &\factor{  4.15}\\
Splay        &   10506 &     973 &\factor{ 10.80}  &    6252 &    1328 &\factor{  4.71}  &   12253 &     587 &\factor{ 20.86}  &    1326 &     135 &\factor{  9.79}\\
NavierStokes &   15511 &    2265 &\factor{  6.85}  &   24043 &    2562 &\factor{  9.39}  &   25519 &     654 &\factor{ 39.00}  &     327 &      53 &\factor{  6.17}\\
RegExp       &    3813 &     568 &\factor{  6.71}  &    4151 &     545 &\factor{  7.62}  &    2128 &     245 &\factor{  8.70}  &     838 &      90 &\factor{  9.30}\\
\hline
{\it Geom.~mean} & {\it 10027} & {\it  519} & \factor{\it 19.30}
                 & {\it 15456} & {\it  490} & \factor{\it 31.54}
                 & {\it 11150} & {\it  198} & \factor{\it 56.26}
                 & {\it  421}  & {\it   46} & \factor{\it  9.09} \\ \hline
\end{tabular}
}
\caption[Inherent overhead of Photon]{Inherent overhead of Photon on the V8 benchmark suite on each JS VM.
A measure of the execution speed, the {\it V8 score}, is given for the benchmark
executed without and with Photon, as well as the ratio of the scores.}
\label{tb:inherent-overhead-v8-benchmarks}
\end{table*}

\begin{table}[htb]
\centering
\begin{tabular}{|l|r|r|r|r|}
\hline
          & \multicolumn{1}{c|}{Safari} & \multicolumn{1}{c|}{Chrome} & \multicolumn{1}{c|}{Firefox} & \multicolumn{1}{c|}{Firefox} \\
Benchmark & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}     & \multicolumn{1}{c|}{interp.}     \\
\hline
Richards     &\factor{ 30.42} &\factor{ 34.15} &\factor{ 25.61} &\factor{  9.69} \\
RayTrace     &\factor{ 11.90} &\factor{ 11.11} &\factor{ 10.15} &\factor{  6.61} \\
DeltaBlue    &\factor{ 29.57} &\factor{ 33.66} &\factor{ 19.65} &\factor{ 10.55} \\
Crypto       &\factor{114.19} &\factor{171.28} &\factor{ 42.24} &\factor{ 13.57} \\
Splay        &\factor{ 12.62} &\factor{ 28.49} &\factor{ 18.07} &\factor{  7.02} \\
NavierStokes &\factor{195.26} &\factor{320.60} &\factor{ 98.85} &\factor{ 16.55} \\
RegExp       &\factor{  5.51} &\factor{  6.39} &\factor{  4.56} &\factor{  2.88} \\
\hline
{\it Geom.~mean} & \factor{\it  28.84} & \factor{\it   38.60} & \factor{\it   20.93} & \factor{\it 8.45} \\ \hline
\end{tabular}
\caption[Execution speed slowdown of Photon with deactivated send caches]{Execution speed slowdown of Photon on the V8 benchmark suite on each JS VM when send caches are deactivated}
\label{tb:send-cache-effect}
\end{table}

\begin{table}[t]
\centering
\begin{tabular}{|l|r|r|r|}
\hline
          & \multicolumn{1}{c|}{Safari} & \multicolumn{1}{c|}{Chrome} & \multicolumn{1}{c|}{Firefox} \\
Benchmark & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT} \\
\hline
Richards     &\factor{  1.43} &\factor{  1.84} &\factor{  2.90} \\
RayTrace     &\factor{  2.56} &\factor{  3.80} &\factor{  5.50} \\
DeltaBlue    &\factor{  1.25} &\factor{  1.50} &\factor{  3.32} \\
EarleyBoyer  &\factor{  1.03} &\factor{  1.02} &\factor{  2.80} \\
Crypto       &\factor{   .14} &\factor{   .14} &\factor{   .73} \\
Splay        &\factor{  1.36} &\factor{  1.00} &\factor{  2.26} \\
NavierStokes &\factor{   .14} &\factor{   .13} &\factor{   .50} \\
RegExp       &\factor{  1.48} &\factor{  1.54} &\factor{  3.43} \\
\hline
{\it Geom.~mean} & \factor{\it  .81} & \factor{\it  .86} & \factor{\it 2.13} \\ \hline
\end{tabular}
\caption[Performance of the V8 benchmark suite executed by Photon without instrumentation]
{Performance of the V8 benchmark suite executed by Photon without instrumentation
on each JIT VM compared to the benchmark running directly on the Firefox interpreter.  The numbers
indicate the execution speed ratio (smaller than one is better for Photon).}
\label{tb:perf-no-instrumentation-photon-vs-interpreter}
\end{table}

\begin{table}[t]
\centering
\begin{tabular}{|l|r|r|r|r|}
\hline
          & \multicolumn{1}{c|}{Safari} & \multicolumn{1}{c|}{Chrome} & \multicolumn{1}{c|}{Firefox} & \multicolumn{1}{c|}{Firefox} \\
Benchmark & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}     & \multicolumn{1}{c|}{interp.}     \\
\hline
Richards     &\factor{  2.31} &\factor{  2.38} &\factor{  2.81} &\factor{  1.88} \\
RayTrace     &\factor{  1.59} &\factor{  1.30} &\factor{  2.19} &\factor{  1.55} \\
DeltaBlue    &\factor{  2.68} &\factor{  3.16} &\factor{  2.03} &\factor{  1.98} \\
EarleyBoyer  &\factor{  2.18} &\factor{  2.31} &\factor{  2.71} &\factor{  1.78} \\
Crypto       &\factor{ 16.80} &\factor{ 18.53} &\factor{  6.91} &\factor{  4.33} \\
Splay        &\factor{  1.70} &\factor{  2.45} &\factor{  1.96} &\factor{  1.42} \\
NavierStokes &\factor{ 29.17} &\factor{ 39.41} &\factor{ 11.86} &\factor{  5.65} \\
RegExp       &\factor{  1.37} &\factor{  1.31} &\factor{  1.29} &\factor{  1.30} \\
\hline
{\it Geom.~mean} & \factor{\it 3.54} & \factor{\it 3.90} & \factor{\it 3.03} & \factor{\it 2.15} \\ \hline
\end{tabular}
\caption[Execution speed slowdown of Photon with a simple instrumentation]{Execution speed slowdown of Photon with the simple instrumentation of property read, write and delete}
\label{tb:slowdown-simple}
\end{table}

\begin{table}[t]
\centering
\begin{tabular}{|l|r|r|r|r|}
\hline
          & \multicolumn{1}{c|}{Safari} & \multicolumn{1}{c|}{Chrome} & \multicolumn{1}{c|}{Firefox} & \multicolumn{1}{c|}{Firefox} \\
Benchmark & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}     & \multicolumn{1}{c|}{interp.}     \\
\hline
Richards     &\factor{  1.06} &\factor{  1.26} &\factor{  1.07} &\factor{  1.24} \\
RayTrace     &\factor{  1.07} &\factor{   .93} &\factor{  1.02} &\factor{  1.15} \\
DeltaBlue    &\factor{  1.11} &\factor{  1.01} &\factor{  1.02} &\factor{  1.19} \\
EarleyBoyer  &\factor{  1.12} &\factor{  1.14} &\factor{  1.07} &\factor{  1.15} \\
Crypto       &\factor{  1.23} &\factor{  1.00} &\factor{  1.00} &\factor{  1.30} \\
Splay        &\factor{  1.68} &\factor{  1.37} &\factor{  1.05} &\factor{  1.17} \\
NavierStokes &\factor{  1.07} &\factor{  2.05} &\factor{  1.11} &\factor{  1.36} \\
RegExp       &\factor{  1.01} &\factor{   .99} &\factor{  1.02} &\factor{  1.03} \\
\hline
{\it Geom.~mean} & \factor{\it 1.15} & \factor{\it 1.18} & \factor{\it 1.04} & \factor{\it 1.19} \\ \hline
\end{tabular}
\caption[Execution speed slowdown of Photon with a fast instrumentation]{Execution speed slowdown of Photon with the fast instrumentation of property read, write and delete}
\label{tb:slowdown-fast}
\end{table}


\begin{table}[t]
\centering
\begin{tabular}{|l|r|r|r|r|}
\hline
          & \multicolumn{1}{c|}{Safari} & \multicolumn{1}{c|}{Chrome} & \multicolumn{1}{c|}{Firefox} & \multicolumn{1}{c|}{Firefox} \\
Benchmark & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}    & \multicolumn{1}{c|}{JIT}     & \multicolumn{1}{c|}{interp.}     \\
\hline
Richards     &\factor{ 43.44} &\factor{ 36.74} &\factor{ 83.33} &\factor{  9.85} \\
RayTrace     &\factor{ 11.65} &\factor{ 16.46} &\factor{ 37.69} &\factor{  6.79} \\
DeltaBlue    &\factor{ 30.16} &\factor{ 42.28} &\factor{121.09} &\factor{ 10.77} \\
EarleyBoyer  &\factor{  5.67} &\factor{ 10.63} &\factor{ 23.74} &\factor{  4.82} \\
Crypto       &\factor{ 12.27} &\factor{  7.89} &\factor{ 22.32} &\factor{  3.47} \\
Splay        &\factor{  3.18} &\factor{  3.11} &\factor{  6.29} &\factor{  5.04} \\
NavierStokes &\factor{  4.13} &\factor{  6.45} &\factor{ 15.35} &\factor{  5.17} \\
RegExp       &\factor{  2.31} &\factor{  1.65} &\factor{  3.27} &\factor{  3.33} \\
\hline
{\it Geom.~mean} & \factor{\it 8.68} & \factor{\it 9.58} & \factor{\it 22.41} & \factor{\it 5.65} \\ \hline
\end{tabular}
\caption[Execution speed slowdown of esprof]{Execution speed slowdown of the V8 benchmark suite transformed by esprof
on each JIT VM}
\label{tb:esprof-slowdown}
\end{table}
